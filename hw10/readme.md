# 操作系统 作业 10

宋婉婷 2022K8009929009

## 10.1

现有一个内存空间分配器，采用伙伴算法。假设物理内存总共 64 KB，

1) 请给出第一级的一对伙伴块的起始地址
2) 请给出第二级的二对伙伴块的起始地址
3) 地址 0xa700，已知它位于第 7 级伙伴块中，请问该块的伙伴块的起始地址

**答：**

1. 第一级伙伴块大小为 $64\div2=32KB=2^{15}$，换算为 16 进制为 0x8000，则第一级伙伴块地址应被 0x8000 整除。不妨设为 0x0000 和 0x8000。
2. 第二级伙伴块大小为 $32\div2=16KB=2^{14}=0x4000$​，则第一对的起始地址为 0x0000 与 0x4000，第二对为 0x4000 和 0x8000 。
3. 第七级伙伴块大小为 $64\div2^7=0.5KB=512B=0x200$，第一级伙伴块地址应被 0x200 整除，则 0xa700 对应的块起始地址是 0xa600。由于 0xa600=0x200*53，那么他的伙伴块起始地址是 0x200\*52=0xa400 。

## 10.2

现有一块磁盘，扇区大小为 512B，假设其平均寻道时间是 5ms，旋转速率是 12000 RPM（每分钟 12000 转），传输带宽是 250MB/s，请计算：

1）当某一用户程序分别从磁盘上的一个文件中读取 256B，1KB，1MB 的数据时，这三种情况下的有效带宽各是多少？（注意：用户程序发送的文件数据读写请求经过文件系统处理后，发往磁盘的最小请求粒度是 4KB。计算有效带宽时不考虑软件层的时间开销）

2）如果希望该用户程序读写该磁盘的有效带宽达到 180MB/s，则该程序的读写粒度应为多大？

**答：**

(1)seek time = 5ms

rotation time = $\frac{1}{12000\div60}*\frac{1}{2}=2.5ms$​

256B：EBW = $\frac{256B}{5ms+2.5ms+4KB\div250MB/s}=\frac{256B}{7.515625ms}=33.26KB/s$

1KB：EBW = $\frac{1KB}{5ms+2.5ms+4KB\div250MB/s}=\frac{1KB}{7.515625ms}=133.07KB/s$

1MB：EBW = $\frac{1MB}{5ms+2.5ms+1MB\div250MB/s}=\frac{1MB}{11.5ms}=86.96MB/s$​

(2) 列方程 $\frac{size}{7.5ms+size\div250MB/s}=180MB/s$，解得 $size=4.82MB$

## 10.3

现有一块磁盘，假设其磁头当前位于第 103 磁道，正在向磁道序号增加的方向移动。现有一个磁盘访问请求序列，其访问的磁道号依次为 33，50，8，69，110，150，173，202，请计算：

1）当分别采用 FIFO、SSF 和 C-SCAN 三种磁盘调度算法执行上述磁盘请求序列时，三种情况下的寻道距离各是多少？

**答：**

1. FIFO 磁道访问顺序为 (103)->33->50->8->69->110->150->173->202

   寻道距离 70+17+42+61+41+40+23+29=323

2. SSF 磁道访问顺序为 (103)->110->150->173->202->69->50->33->8

   寻道距离 7+40+23+29+133+19+17+25=293

3. C-SCAN 磁道访问顺序为 (103)->110->150->173->202->0->8->33->50->69

   寻道距离 7+40+23+29+202+8+25+17+19=370